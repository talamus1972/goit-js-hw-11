{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form');\nconst imagesGallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nconst BASE_URL = 'https://pixabay.com/api/?';\nconst API_KEY = '41564235-b9b3b0b401bd21d391a887255';\n\nconst searchParamsDefault = {\n  key: API_KEY,\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  close: true,\n  enableKeyboard: true,\n  docClose: true,\n});\n\nconst showLoader = state => {\n  loader.style.display = state ? 'block' : 'none';\n};\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  showLoader(true);\n  searchParamsDefault.q = encodeURIComponent(\n    event.target.elements.search.value.trim()\n  );\n  if (searchParamsDefault.q === '') {\n    console.error('Please enter a valid search query.');\n    return;\n  }\n  const searchParams = new URLSearchParams(searchParamsDefault);\n  getImages(searchParams);\n  event.currentTarget.reset();\n});\n\nconst getImages = params => {\n  showLoader(true);\n  return fetch(BASE_URL + `${params}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`Something went wrong. Please try again later.`);\n      }\n      return response.json();\n    })\n    .then(({ hits }) => {\n      imagesGallery.innerHTML = '';\n      if (hits.length === 0) {\n        iziToast.error({\n          position: 'topRight',\n          messageColor: '#FFFFFF',\n          backgroundColor: '#EF4040',\n          titleSize: '8px',\n          closeOnEscape: true,\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      } else {\n        imagesGallery.innerHTML = '';\n        imagesGallery.innerHTML = hits.reduce(\n          (html, image) =>\n            html +\n            `\n                    <li class=\"gallery-item\">\n                        <a href=${image.largeImageURL}> \n                            <img class=\"gallery-img\" src=${image.webformatURL} alt=${image.tags}/>\n                        </a>\n                        <div class=\"gallery-text-box\">\n                            <p>Likes: <span class=\"text-value\">${image.likes}</span></p>\n                            <p>Views: <span class=\"text-value\">${image.views}</span></p>\n                            <p>Comments: <span class=\"text-value\">${image.comments}</span></p>\n                            <p>Downloads: <span class=\"text-value\">${image.downloads}</span></p>\n                        </div>\n                    </li>\n                `,\n          ''\n        );\n        lightbox.refresh();\n      }\n    })\n\n    .catch(error => {\n      console.error(error.message);\n    })\n    .finally(() => {\n      showLoader(false);\n    });\n};\n"],"names":["form","imagesGallery","loader","BASE_URL","API_KEY","searchParamsDefault","lightbox","SimpleLightbox","showLoader","state","event","searchParams","getImages","params","response","hits","iziToast","html","image","error"],"mappings":"6vBAKA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAgB,SAAS,cAAc,UAAU,EACjDC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAW,4BACXC,EAAU,qCAEVC,EAAsB,CAC1B,IAAKD,EACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EAEME,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,IACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACZ,CAAC,EAEKC,EAAaC,GAAS,CAC1BP,EAAO,MAAM,QAAUO,EAAQ,QAAU,MAC3C,EAEAT,EAAK,iBAAiB,SAAUU,GAAS,CAMvC,GALAA,EAAM,eAAc,EACpBF,EAAW,EAAI,EACfH,EAAoB,EAAI,mBACtBK,EAAM,OAAO,SAAS,OAAO,MAAM,KAAM,CAC7C,EACML,EAAoB,IAAM,GAAI,CAChC,QAAQ,MAAM,oCAAoC,EAClD,MACD,CACD,MAAMM,EAAe,IAAI,gBAAgBN,CAAmB,EAC5DO,EAAUD,CAAY,EACtBD,EAAM,cAAc,OACtB,CAAC,EAED,MAAME,EAAYC,IAChBL,EAAW,EAAI,EACR,MAAML,EAAW,GAAGU,GAAQ,EAChC,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,+CAA+C,EAEjE,OAAOA,EAAS,MACtB,CAAK,EACA,KAAK,CAAC,CAAE,KAAAC,KAAW,CAClBd,EAAc,UAAY,GACtBc,EAAK,SAAW,EAClBC,EAAS,MAAM,CACb,SAAU,WACV,aAAc,UACd,gBAAiB,UACjB,UAAW,MACX,cAAe,GACf,QACE,0EACZ,CAAS,GAEDf,EAAc,UAAY,GAC1BA,EAAc,UAAYc,EAAK,OAC7B,CAACE,EAAMC,IACLD,EACA;AAAA;AAAA,kCAEsBC,EAAM;AAAA,2DACmBA,EAAM,oBAAoBA,EAAM;AAAA;AAAA;AAAA,iEAG1BA,EAAM;AAAA,iEACNA,EAAM;AAAA,oEACHA,EAAM;AAAA,qEACLA,EAAM;AAAA;AAAA;AAAA,kBAIjE,EACV,EACQZ,EAAS,QAAO,EAExB,CAAK,EAEA,MAAMa,GAAS,CACd,QAAQ,MAAMA,EAAM,OAAO,CACjC,CAAK,EACA,QAAQ,IAAM,CACbX,EAAW,EAAK,CACtB,CAAK"}